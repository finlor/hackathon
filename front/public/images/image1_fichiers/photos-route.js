(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{1107:function(e,t,a){"use strict";a.d(t,"a",function(){return h}),a.d(t,"b",function(){return g});var i=a(0),l=a.n(i),n=a(16),o=a(8),s=a(62),u=a(100);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h,c,b=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]])}return a};(c=h||(h={})).StaticRoute="StaticRoute",c.DynamicRoute="DynamicRoute";var g=function(e){var c=e.routeType;return function(r){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,p(t).apply(this,arguments))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,i["Component"]),a=t,(n=[{key:"componentDidUpdate",value:function(){c===h.DynamicRoute?this.props.dynamicRouteComponentUpdated({}):this.props.staticRouteComponentUpdated({})}},{key:"render",value:function(){var e=this.props,t=(e.dynamicRouteComponentUpdated,e.staticRouteComponentUpdated,b(e,["dynamicRouteComponentUpdated","staticRouteComponentUpdated"]));return l.a.createElement(r,Object.assign({},t))}}])&&m(a.prototype,n),o&&m(a,o),t}();e.displayName="TrackRouteUpdates(".concat(Object(u.a)(r),")");var t=Object(s.b)()({dynamicRouteComponentUpdated:o.a.DynamicRouteComponentUpdated,staticRouteComponentUpdated:o.a.StaticRouteComponentUpdated});return Object(n.connect)(function(){return{}},t)(e)}}},1113:function(e,t,a){e.exports={smallTag:"_6PxCM"}},1115:function(e,t,a){e.exports={gutter:"8px",tagsContainer:"_2_OE1",tagItem:"_3Z-ua"}},1117:function(e,t,a){"use strict";var n=a(271),o=a.n(n),r=a(0),c=a.n(r),i=a(10),l=a.n(i),s=a(16),u=a(1250),m=a(8),d=a(241),p=a(1113),f=a.n(p),h=function(e){var t=e.tag,a=e.emplacement,n=e.trackSearchSuggestionClick,o=e.className,r="linkUrl"in t?t.linkUrl:Object(d.b)(t.title);return c.a.createElement(u.a,{className:l()(f.a.smallTag,o),to:r,title:"".concat(t.title," images"),onClick:function(){return n(t.title.toLowerCase(),a)}},t.title)};h.displayName="SmallTag";var b={trackSearchSuggestionClick:m.Z},g=Object(s.connect)(function(){return{}},b)(h),v=a(1115),y=a.n(v),O=function(e){var t=e.tags,a=e.emplacement,n=e.takeN;return c.a.createElement("div",{className:y.a.tagsContainer},(n?o()(t,n):t).map(function(e){return c.a.createElement("div",{key:e.title,className:y.a.tagItem},c.a.createElement(g,{tag:e,emplacement:a}))}))};O.displayName="SmallTagsList";var I=O;a.d(t,"a",function(){return I})},1118:function(e,t,a){e.exports={colorWhite:"#fff",colorLightGrey:"#ddd",colorGrey:"#999",colorDarkGrey:"#777",colorBlue:"#007fff",colorDarkBlue:"#006aff",colorBlack:"#000",followButton:"_3nDcb",isFollowing:"_2br-F",followIcon:"_2BKrY"}},1130:function(e,t,a){e.exports={"--sm":"(--sm)","--md-min":"(--md-min)",colorGrey:"#999",colorDarkWhite:"#f5f5f5",colorLightBlack:"#111",headingXs:"_2uOAz",fontWeightSemibold:"_13Ib2",truncate:"_1ByhS",textDecorationNone:"_1CBrG",maxWidth:"750px",smallImagePercentage:"30%",bigImagePercentage:"70%",aspectRatioWrapper:"_2Dp1M",collectionContainer:"_28_Yu",linkWrapper:"fM0CB _1CBrG",imagesContainer:"_2zwgf",smallImagesContainer:"_2gO6E",image:"Kh8bw",bigImageWrapper:"_2vGrb",smallImageWrapper:"mTW0H",titleContainer:"_3zVYZ _1ByhS",iconPrivate:"_39uDR",title:"_2LKkn _2uOAz _13Ib2 _1ByhS",description:"_3-HBj _1ByhS",userLink:"_37zDu"}},1140:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(t){return function(e){return t.username===e.username}}},1141:function(e,t,a){"use strict";var n=a(10),s=a.n(n),o=a(3),r=a.n(o),c=a(164),i=a.n(c),l=a(0),u=a.n(l),m=a(16),d=a(1586),p=a(1584),f=a(1575),h=a(8),b=a(66),g=a(19),v=a(11),y=a(22),O=a(23),I=Object(O.a)("M31.2 12.8h-2.4v-2.4c0-.4-.4-.8-.8-.8h-1.6c-.4 0-.8.4-.8.8v2.4h-2.4c-.4 0-.8.4-.8.8v1.6c0 .4.4.8.8.8h2.4v2.4c0 .4.4.8.8.8h1.6c.4 0 .8-.4.8-.8v-2.4h2.4c.4 0 .8-.4.8-.8v-1.6c0-.4-.4-.8-.8-.8zm-15.2 5.1v-1.2c1.9-1.1 3.2-3.1 3.2-5.5v-1.6c0-3.5-2.9-6.4-6.4-6.4s-6.4 2.9-6.4 6.4v1.6c0 2.4 1.3 4.4 3.2 5.5v1.2c-5.5.9-9.6 4-9.6 7.7v1.6c0 .9.7 1.6 1.6 1.6h22.4c.9 0 1.6-.7 1.6-1.6v-1.6c0-3.7-4.1-6.8-9.6-7.7z"),E=a(194),_=a(27),S=a(48),w=a(1118),j=a.n(w);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=Object(v.a)()({labelText:{isFollowing:"Following",isNotFollowing:"Follow"}}),k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),N(this,D(t).apply(this,arguments))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,l["Component"]),a=t,(n=[{key:"componentWillUnmount",value:function(){this.followSubscription&&this.followSubscription.unsubscribe()}},{key:"getLabelText",value:function(){var e=this.props.labelText;return this.props.selectedUser.followed_by_user?e.isFollowing:e.isNotFollowing}},{key:"buildToLink",value:function(){var e=this.props,t=e.authUser,a=e.location,n=Object(g.g)(a),o=t?n:Object.assign({},n,{login_view:"is_visible",login_action:"follow"});return{pathname:a.pathname,search:Object(E.a)(o),state:a.state}}},{key:"buildClickHandler",value:function(){var t=this,e=this.props,a=e.authUser,n=e.selectedUser,o=e.followUser,r=e.unfollowUser,c=e.trackFollowButtonClick,i=e.trackUnfollowButtonClick,l=e.buttonType;if(!a)return function(){return c(n.id,l)};var s=n.username,u=n.followed_by_user,m=(u?b.a.users.unfollowUser:b.a.users.followUser)({username:s}).pipe(Object(p.a)(3),Object(f.a)(1));return function(e){e.stopPropagation(),u?(r(n.id),i(n.id,l)):(o(n.id),c(n.id,l)),t.followSubscription=m.subscribe()}}},{key:"renderContainer",value:function(e){var t=this.props,a=t.selectedUser,n=t.className,o=t.authUser,r=this.buildClickHandler(),c=a.followed_by_user,i=!o,l={className:s()(j.a.followButton,c&&j.a.isFollowing,n),buttonSize:"small"};return i?u.a.createElement(S.a,Object.assign({tag:"link",to:this.buildToLink(),onMouseUp:r},l),e):u.a.createElement(S.a,Object.assign({tag:"button",onMouseUp:r},l),e)}},{key:"render",value:function(){var e=this.props,t=e.selectedUser,a=e.authUser;return i()(a,"username")===t.username?u.a.createElement("div",null):this.renderContainer(u.a.createElement("span",null,u.a.createElement(I,{className:j.a.followIcon}),this.getLabelText()))}}])&&T(a.prototype,n),o&&T(a,o),t}();k.displayName="FollowButton";Object(y.a)(k,C);var x={trackFollowButtonClick:h.Q,trackUnfollowButtonClick:h.bb,followUser:h.m,unfollowUser:h.eb},L=Object(y.a)(r()(Object(m.connect)(function(e){return{authUser:Object(_.d)(e)}},x),d.a)(k),C);a.d(t,"a",function(){return L})},1143:function(e,t,a){"use strict";var h,n,b=a(2),o=a(0),g=a.n(o),r=a(16),v=a(1250),y=a(448),O=a(118),I=a(67),c=a(11),i=a(22),E=a(276),l=a(27),_=a(452),S=a(1117),w=a(453),s=a(119),u=a(449),m=a(86),d=a(275),p=a(1130),j=a.n(p),f=Object(s.e)({styles:j.a,key:"maxWidth",fallback:200});(n=h||(h={})).full="full",n.half="half";var R=function(e){return e.urls.raw},T=function(t){return function(e){return{src:Object(m.d)(e)({w:f}),srcSet:Object(u.b)({baseUrl:e,width:f*function(e){switch(e){case h.full:return Object(d.f)(Object(s.e)({styles:j.a,key:"bigImagePercentage",fallback:50}));case h.half:return Object(d.f)(Object(s.e)({styles:j.a,key:"smallImagePercentage",fallback:50}))}}(t),getParams:b.a.none()})}}},N=function(e,t,a){return e.chain(function(e){return Object(c.c)(t,e)}).map(R).map(T(a))},D=Object(c.a)()({showUserInfo:!0}),P=function(e){var t=e.collection,a=e.isLoggedIn,n=e.showUserInfo,o=t.user,r=t.total_photos,c=t.preview_photos,i=t.private,l=t.tags,s=Object(O.e)(t),u=b.a.of(c),m=N(u,0,h.full),d=N(u,1,h.half),p=N(u,2,h.half),f=n?g.a.createElement("span",null," ","Â· Curated by"," ",a?g.a.createElement(v.a,{to:Object(I.f)(o),className:j.a.userLink},o.name):o.name):null;return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:j.a.aspectRatioWrapper},g.a.createElement("div",{className:j.a.collectionContainer},g.a.createElement(v.a,{to:{pathname:s},className:j.a.linkWrapper},g.a.createElement("div",{className:j.a.imagesContainer},m.map(function(e){var t=e.src,a=e.srcSet;return g.a.createElement(_.a,{role:"presentation",containerClassName:j.a.bigImageWrapper,className:j.a.image,src:t,srcSet:a})}).getOrElse(g.a.createElement("div",{className:j.a.bigImageWrapper})),g.a.createElement("div",{className:j.a.smallImagesContainer},d.map(function(e){var t=e.src,a=e.srcSet;return g.a.createElement(_.a,{role:"presentation",containerClassName:j.a.smallImageWrapper,className:j.a.image,src:t,srcSet:a})}).getOrElse(g.a.createElement("div",{className:j.a.smallImageWrapper})),p.map(function(e){var t=e.src,a=e.srcSet;return g.a.createElement(_.a,{role:"presentation",containerClassName:j.a.smallImageWrapper,className:j.a.image,src:t,srcSet:a})}).getOrElse(g.a.createElement("div",{className:j.a.smallImageWrapper})))),g.a.createElement("div",{className:j.a.titleContainer},i&&g.a.createElement("span",{className:j.a.isPrivateContainer},g.a.createElement(w.a,{className:j.a.isPrivateTooltip,label:"This collection is private. To share, copy the URL or make the collection public.",width:200},g.a.createElement(E.a,{className:j.a.iconPrivate}))),g.a.createElement("div",{className:j.a.title},t.title))),g.a.createElement("div",{className:j.a.description},r," photos",f))),g.a.createElement(S.a,{tags:l,takeN:3,emplacement:y.a.CollectionCard}))};P.displayName="CollectionCard";var C=Object(i.a)(Object(r.connect)(function(e,t){return{isLoggedIn:Object(l.k)(e)}})(P),D);a.d(t,"a",function(){return C})},1144:function(e,t,a){"use strict";a.d(t,"c",function(){return n}),a.d(t,"b",function(){return o}),a.d(t,"d",function(){return r}),a.d(t,"a",function(){return c});var n=4,o=12,r=30,c=30},1146:function(e,t,a){e.exports={"--sm":"(--sm)","--sm-min":"(--sm-min)","--md-min":"(--md-min)",colorLightGrey:"#ddd",placeholderBackground:"_2VWD4",gutter:"24px",oneHundrendPercent:"100%",fiftyPercent:"50%",collectionContainer:"aRXfJ",placeholderAspectRatioWrapper:"_38ir7",placeholderContainer:"_23eiF",placeholder:"hr_aU _2VWD4",placeholderTextBox:"_1ct3H _2VWD4",placeholderTextBox2:"_2h2D1 _2VWD4",placeholderTextBox3:"_3Lyw- _2VWD4",placeholderTextBox1:"_3pEhD _2VWD4"}},1148:function(e,t,a){e.exports={gutter:"24px",container:"_1yKlc"}},1151:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(1148),c=a.n(r),i=function(e){var t=e.children;return o.a.createElement("div",{className:c.a.container},t)};i.displayName="CollectionGridContainer";var l=i;a.d(t,"a",function(){return l})},1152:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(354),c=a(1143),i=a(1146),l=a.n(i),s=function(e){var t=e.collection;return o.a.createElement("div",{className:l.a.collectionContainer,"data-test":r.c},t?o.a.createElement(c.a,{collection:t}):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:l.a.placeholderAspectRatioWrapper},o.a.createElement("div",{className:l.a.placeholderContainer},o.a.createElement("div",{className:l.a.placeholder}),o.a.createElement("div",{className:l.a.placeholderTextBox}),o.a.createElement("div",{className:l.a.placeholderTextBox2}))),o.a.createElement("div",{className:l.a.placeholderTextBox3})))};s.displayName="CollectionGridCard";var u=s;a.d(t,"a",function(){return u})},1162:function(e,t,a){e.exports={"--sm-min":"(--sm-min)",container:"_3w_cF _2sCnE PrOBO",fontWeightNormal:"_27Bp2",heading:"_2azK- _27Bp2",hideOnMobile:"_1Co2N"}},1167:function(e,t,a){"use strict";a.d(t,"b",function(){return o}),a.d(t,"c",function(){return s}),a.d(t,"a",function(){return u});var n=a(3),r=a.n(n),c=a(0),i=a(35);function l(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=function(e){var o=e.render;return r()(function(e){return e.map(function(e){var t,a=e.maybeEl,n=e.key;return a.map(o).map((t=n,function(e){return Object(c.cloneElement)(e,{key:t})}))})},i.a)},s=function(e){var t=e.render,a=e.renderItem;return r()(o({render:a}),i.c,function(e){return e.map(t)})},u=function(n,o){return n.reduce(function(e,t,a){return l(e).concat([t],l(a===n.length-1?[]:[o(a)]))},[])}},1171:function(e,t,a){"use strict";var n=a(10),i=a.n(n),o=a(271),l=a.n(o),r=a(0),s=a.n(r),c=a(1144),u=a(448),m=a(11),d=a(22),p=a(1117),f=a(1162),h=a.n(f),b=Object(m.a)()({tags:[],headingCopy:"Related searches",showHeading:!1,hideOnMobile:!1,maximumResultsCount:c.b}),g=function(e){var t=e.showHeading,a=e.tags,n=e.hideOnMobile,o=e.headingCopy,r=e.maximumResultsCount,c=l()(a,r);return 0===c.length?s.a.createElement("div",null):s.a.createElement("div",{className:i()(h.a.container,n&&h.a.hideOnMobile)},t&&s.a.createElement("p",{className:h.a.heading},o),s.a.createElement(p.a,{tags:c,emplacement:u.a.Related}))};g.displayName="RelatedTags";var v=Object(d.a)(g,b);a.d(t,"a",function(){return v})},1190:function(e,t,a){e.exports={fontWeightNormal:"_27Bp2",clearfix:"_2KLco",gutter:"calc(4px * 3)",contentContainer:"_33G6-",heading:"_2gjZV _33G6-"}},1192:function(e,t,a){e.exports={spacingUnit:"4px",flexContainer:"_10F2J",icon:"_1xhtJ",text:"_3UPwX"}},1194:function(e,t,a){e.exports={spacingUnit:"4px",fontWeightNormal:"_27Bp2",colorFacebook:"#3b5998",colorTwitter:"#1da1f2",colorPinterest:"#c92228",colorDarkGrey:"#777",containerPaddingUnit:"calc(4px * 4)",cellPaddingUnit:"calc(4px * 2)",cellPaddingUnitHalf:"4px",headerFontSize:"21px",smallFontSize:"12px",container:"_2VlB5",cell:"_1dPrd",halfCell:"_201D8",title:"_32uh- _27Bp2",subtitle:"_2B7-n",shareLinks:"_3E7sP",shareLinkContainer:"_1J04C",shareLink:"_2SPjs",shareLinkIcon:"_2U6YH",facebookShareLinkIcon:"_272Go _2U6YH",twitterShareLinkIcon:"_1tkzW _2U6YH",pinterestShareLinkIcon:"ZO3Vz _2U6YH",emailShareLinkIcon:"_2L646 _2U6YH",shareLinkText:"_1Wr08"}},1197:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n=a(0),o=a.n(n),r=a(16),c=a(100),i=a(193),l=function(t){var e=function(e){return o.a.createElement(t,Object.assign({},e,{photos:e.photos}))};e.displayName="MapPhotoIdsToPhotos(".concat(Object(c.a)(t),")");return Object(r.connect)(function(){var a=Object(i.g)();return function(e,t){return{photos:a(e,t.photoIds)}}})(e)}},1201:function(e,t,a){"use strict";var n=a(23);t.a=Object(n.a)("M16 0c-6.7 0-12 5.3-12 12 0 8.6 8.6 17.3 11.2 19.7.4.4 1.1.4 1.5 0 2.7-2.4 11.3-11.1 11.3-19.7 0-6.7-5.3-12-12-12zm0 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6z")},1202:function(e,t,a){"use strict";var n=a(23);t.a=Object(n.a)("M16 0c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.2-16-16-16zm2 25c0 .6-.4 1-1 1h-2c-.6 0-1-.4-1-1v-12c0-.6.4-1 1-1h2c.6 0 1 .4 1 1v12zm0-16c0 .6-.4 1-1 1h-2c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1h2c.6 0 1 .4 1 1v2z")},1203:function(e,t,a){e.exports={colorGrey:"#999",outerHorizontalGutter:"16px",innerHorizontalGutter:"8px",cellPadding:"calc(8px / 2)",container:"_307c3",actions:"_3-6v7",cell:"_2iWc-",buttonCell:"_27vvN _2iWc-",photographer:"HAAez _2iWc-",downloadButtonCell:"_13Q- _27vvN _2iWc-",downloadButton:"_1AA_u",secondaryLabel:"_2cSl3"}},1216:function(e,t,a){"use strict";var n=a(10),c=a.n(n),r=a(2),i=a(0),l=a.n(i),s=a(446),o=a(23),u=Object(o.a)("M0 26c0 1.7.2 3.3.6 4.9.2.9.7.9 1 0 2.1-5.3 5.5-10.3 11.1-11.3h3.3v4.4c0 2 1.2 2.6 2.6 1.4l12.8-11c.7-.6.7-1.6 0-2.3l-12.8-11c-1.4-1.3-2.6-.6-2.6 1.3v4.7c-9.6 1.6-16 9.4-16 18.9z"),m=a(48),d=a(1192),p=a.n(d);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=b(this,g(a).call(this,e))).state=t.getInitialState(),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(a,i["PureComponent"]),t=a,(n=[{key:"getInitialState",value:function(){var a=this,e=this.props.renderType;return{maybeShareFunction:s.a.match({Enhanced:function(){return r.a.some(window)},Unenhanced:function(){return r.a.none()}})(e).chain(function(t){return void 0!==t.navigator.share?r.a.some(function(e){return t.navigator.share(e)}):r.a.none()}).map(function(e){var t=a.props.shareOptions;return function(){return e(t)}})}}},{key:"renderContent",value:function(){return l.a.createElement("div",{className:p.a.flexContainer},l.a.createElement(u,{className:p.a.icon}),l.a.createElement("span",{className:p.a.text},"Share"))}},{key:"render",value:function(){var t=this,e=this.props,a=e.shareLocationDescriptor,n=e.className,o=this.state.maybeShareFunction,r={className:c()(p.a.flexContainer,n),buttonType:"outline",buttonSize:"small"};return o.map(function(e){return l.a.createElement(m.a,Object.assign({tag:"button",onClick:e},r),t.renderContent())}).getOrElseL(function(){return l.a.createElement(m.a,Object.assign({tag:"link",to:a},r),t.renderContent())})}}])&&h(t.prototype,n),o&&h(t,o),a}(),O=Object(s.b)(y);a.d(t,"a",function(){return O})},1217:function(e,t,a){"use strict";var n=a(243),o=a.n(n),r=a(10),c=a.n(r),i=a(0),l=a.n(i),s=a(471),u=a(286),m=a(310),d=a(287),p=a(215),f=a(474),h=a(1194),b=a.n(h),g=function(e){return l.a.createElement(p.b,Object.assign({},e,{className:b.a.shareLink,buttonType:"outline"}),(t={buttonShareType:e.type},a=t.buttonShareType,p.a.match({email:function(){return l.a.createElement(s.a,{className:b.a.emailShareLinkIcon})},facebook:function(){return l.a.createElement(u.a,{className:b.a.facebookShareLinkIcon})},twitter:function(){return l.a.createElement(d.a,{className:b.a.twitterShareLinkIcon})},pinterest:function(){return l.a.createElement(m.a,{className:b.a.pinterestShareLinkIcon})}})(a)),l.a.createElement("span",{className:b.a.shareLinkText},o()(e.type.tag)));var t,a},v=function(e){var t=e.title,a=e.buttonsShareProps,n=e.link;return l.a.createElement("div",null,l.a.createElement("div",{className:b.a.container},l.a.createElement("div",{className:b.a.cell},l.a.createElement("h2",{className:b.a.title},"Share"),l.a.createElement("span",{className:b.a.subtitle},t)),l.a.createElement("div",{className:c()(b.a.halfCell,b.a.shareLinks)},a.map(function(e){return l.a.createElement("div",{key:e.type.tag,className:c()(b.a.halfCell,b.a.shareLinkContainer)},g(e))})),l.a.createElement("div",{className:b.a.cell},l.a.createElement(f.a,{buttonText:"Copy link"},n))))};v.displayName="ShareModalContent";var y=v;a.d(t,"a",function(){return y})},1220:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(16),c=a(11),i=a(22),l=a(281),s=a(1152),u=a(1151),m=a(1190),d=a.n(m),p=Object(c.a)()({relatedCollectionIds:[]}),f=function(e){var t=e.relatedCollections,a=e.heading;return 0===t.length?null:o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:d.a.clearfix},o.a.createElement("p",{className:d.a.heading},a)),o.a.createElement("div",{className:d.a.contentContainer},o.a.createElement(u.a,null,t.map(function(e,t){return o.a.createElement(s.a,{key:t,collection:e})}))))};f.displayName="RelatedCollections";var h=Object(i.a)(Object(r.connect)(function(e,t){return{relatedCollections:Object(l.c)(e,t.relatedCollectionIds)}})(f),p);a.d(t,"a",function(){return h})},1239:function(e,t,a){e.exports={resetBtn:"DWLeW",spacingUnit:"4px",centerItem:"_3mCZ_",isFixedMediaCondition:"(max-width: 767px)",isZoomableMediaCondition:"(min-width: 768px)",imagePlaceholder:"_2yFK-",imageContainer:"_1ac-D _3mCZ_",imageButton:"_1szcv DWLeW",overlay:"_2MKkb",imageButtonZoomedIn:"_2-OhB",imageButtonZoomedOut:"_1YS_6",overlayChild:"_1w7cG",zoomToggleIcon:"_1NYtf",isFixed:"pADQw",isZoomable:"_2QvSN"}},1428:function(e,t,a){var n=a(1429)(function(e,t){return e+t},0);e.exports=n},1429:function(e,t,a){var r=a(1430),c=a(654);e.exports=function(n,o){return function(e,t){var a;if(void 0===e&&void 0===t)return o;if(void 0!==e&&(a=e),void 0!==t){if(void 0===a)return t;t="string"==typeof e||"string"==typeof t?(e=c(e),c(t)):(e=r(e),r(t)),a=n(e,t)}return a}}},1430:function(e,t,a){var n=a(244);e.exports=function(e){return"number"==typeof e?e:n(e)?NaN:+e}},1431:function(e,t){
/*!
 * array-to-sentence | MIT (c) Shinnosuke Watanabe
 * https://github.com/shinnn/array-to-sentence
*/
e.exports=function(e,t){"use strict";if(!Array.isArray(e))throw new TypeError(String(e)+" is not an array. Expected an array.");function a(e){if("string"!=typeof t[e])throw new TypeError(String(t[e])+" is not a string. `"+e+"` option must be a string.")}return void 0===(t=t||{}).separator?t.separator=", ":a("separator"),void 0===t.lastSeparator?t.lastSeparator=" and ":a("lastSeparator"),0===e.length?"":1===e.length?e[0]:e.slice(0,-1).join(t.separator)+t.lastSeparator+e[e.length-1]}},1432:function(e,t,a){e.exports={truncate:"_1ByhS",resetBtn:"DWLeW",containerTruncated:"_3PLD4",text:"KNDj7",textNotTruncated:"_2FfeD",textTruncated:"b5rtm _1ByhS",toggleButton:"_19oEl DWLeW",expandButton:"_2mJKr"}},1434:function(e,t,a){e.exports={colorGrey:"#999",colorLightBlack:"#111",descriptionExpanded:"_2tqNT",descriptionTruncationNotRequired:"_1fn3S",descriptionTruncated:"_3kvp0"}},1436:function(e,t,a){e.exports={smallFontSize:"12px",outerHorizontalGutter:"16px",innerHorizontalGutter:"8px",cellPadding:"calc(8px / 2)",spacingUnit:"4px",colorLightBlack:"#111",truncate:"_1ByhS",fontWeightMedium:"xLon9",resetBtn:"DWLeW",container:"_1ltEq",cell:"_3dxKb",halfCell:"_3kEvh",textContainer:"_2DxLe _3kEvh",textContainerNotTruncated:"gfzKD",textContainerTruncated:"OD7Kw",textContainerItem:"_28uSB _3kEvh",locationLink:"_2RL3a xLon9",locationIcon:"_15of1",locationTitle:"_20NLS _1ByhS",button:"_3JXJ6",buttonIcon:"_1rYbs",buttonText:"_1efgd",smallButton:"ldOpn"}},1440:function(e,t,a){e.exports={fontWeightNormal:"_27Bp2",clearfix:"_2KLco",gutter:"calc(4px * 3)",contentContainer:"_1zDIT",heading:"_1-q17 _27Bp2"}},1442:function(e,t,a){var n=a(1443),o=a(176);e.exports=function(e){return e&&e.length?n(e,o):0}},1443:function(e,t){e.exports=function(e,t){for(var a,n=-1,o=e.length;++n<o;){var r=t(e[n]);void 0!==r&&(a=void 0===a?r:a+r)}return a}},1444:function(e,t,a){e.exports={containerLayout:"PrOBO",wrapper:"WMwuA",container:"_1OYbO PrOBO",stickyHeaderContainer:"_33qjA",spinnerWrapper:"xn9xU"}},1446:function(e,t,a){e.exports={modalContent:"_29NeT"}},1448:function(e,t,a){e.exports={colorGrey:"#999",fontWeightMedium:"xLon9",lineHeightTitle:"U8wGh",lineHeightCopy:"_13hUA",containerPaddingUnit:"16px",cellPaddingUnit:"8px",headerFontSize:"21px",smallFontSize:"12px",placeholderBackground:"_2VWD4",container:"_11so1",cell:"_3aBA9",col:"Rs1Ko",containerTitle:"_3dtte _11so1",containerFooter:"_2qSy1 _11so1",title:"_2dIZQ U8wGh",datePublished:"_1vScU",p:"_5UTXm",stats:"_19Kkj _11so1",stat:"_1H3Tk _3aBA9 Rs1Ko",statLabel:"_2FiKI",statLabelIcon:"_2nkiz",statLabelText:"B5nBa xLon9",statValue:"_2zoGD",statValueTotal:"_20G9q _13hUA",statValueDelta:"_3R4g7",metadataItemName:"_24YMC",hr:"_1CXhw",metadata:"_1Z2CJ _11so1",metadataItem:"_1XYV- _3aBA9 Rs1Ko",metadataItemValue:"_3Dok4",statValueTotalPlaceholder:"_19b04 _2VWD4",statValueDeltaPlaceholder:"_2rDWN _2VWD4"}},1450:function(e,t,a){e.exports={spacingUnit:"4px",containerPaddingUnit:"calc(4px * 4)",cellPaddingUnit:"calc(4px * 2)",container:"_1OFta",cell:"_1EBGx"}},658:function(e,t,a){"use strict";a.r(t);var E=a(2),n=a(1428),r=a.n(n),o=a(3),m=a.n(o),c=a(1),i=a.n(c),l=a(0),v=a.n(l),s=a(16),u=a(279),d=a(361),p=a(1573),f=a(1577),h=a(1224),b=a(7),g=a(270);var y=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new O(e,this.predicate,this.source))},e}(),O=function(o){function e(e,t,a){var n=o.call(this,e)||this;return n.predicate=t,n.source=a,n.count=0,n.index=0,n}return b.a(e,o),e.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},e.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(g.a),I=a(1579),_=a(366);var S=a(1570),w=a(278),j=a(1569),R=a(1572),T=a(1587),N=a(1591),D=a(8),P=a(66),C=a(19),k=a(132),x=a(62),L=a(25),U=a(141),A=a(1107),B=a(446),F=a(9),M=a(193),W=a(564),z=a(27),q=a(51),H=a(21),Z=a(10),G=a.n(Z),V=a(192),K=a.n(V),Y=a(1431),J=a.n(Y),X=a(243),Q=a.n(X),$=a(164),ee=a.n($),te=a(271),ae=a.n(te),ne=a(1144),oe=a(118);function re(e){var t=ae()(e,ne.c).map(function(e){return e.title});return J()(t)}function ce(e,t){var a=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).cleanVersion,n=void 0!==a&&a,o=[n?"Download this photo":"Download this free HD photo"];if(t.tags&&!n){var r=re(t.tags);o.push("of",r)}if(ee()(t,"location.city")||ee()(t,"location.country")){var c=[t.location.city,t.location.country].filter(function(e){return!!e}).join(", ");o.push("in ".concat(c))}return o.push("by ".concat(e.name," (@").concat(e.username,")")),o.join(" ")}function ie(e){var t,a,n,o,r=e.user,c=function(e,t){var a=ee()(t,"story.title"),n="photo by ".concat(e.name," (@").concat(e.username,") on Unsplash");if(a)return Q()("".concat(a," ").concat(n));if(Object(q.d)(t)){var o=re(t.tags);return Q()("".concat(o," HD ").concat(n))}return"HD ".concat(n)}(r,e),i=ce(r,e),l=(a=(t=e).id,n=t.slug,o=n?"".concat(a,"/").concat(n):a,"https://unsplash.com/photos/".concat(o)),s=ce(r,e,{cleanVersion:!0});return Object(oe.g)({userOption:E.a.some(r),photoOption:E.a.some(e),title:c,description:i,socialDescriptionOption:E.a.some(s),canonicalUrl:l})}var le=a(354),se=a(272),ue=a(1213),me=a(1250),de=a(67),pe=a(241),fe=a(6),he=a(362),be=a(1202),ge=a(1201),ve=a(48),ye=a(1216),Oe=a(152),Ie=a(5),Ee=a(1432),_e=a.n(Ee);function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function je(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ne=Object(Ie.unionize)({NotRequired:Object(Ie.ofType)(),Truncated:Object(Ie.ofType)(),Expanded:Object(Ie.ofType)()}),De=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=je(this,Re(a).call(this,e))).updateRef=function(e){t.textElRef=e},t.state=t.getInitialState(),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(a,l["PureComponent"]),t=a,(n=[{key:"getInitialState",value:function(){return{doesRequireTruncation:!0,shouldForceTruncation:!0}}},{key:"componentDidMount",value:function(){var e,t,a=this,n=(t=E.a.of(a.textElRef).get(),(e=t).offsetWidth<e.scrollWidth);this.setState({doesRequireTruncation:n,shouldForceTruncation:!1})}},{key:"render",value:function(){var e,t,a,n,o,r,c,i=this.props,l=i.text,s=i.containerClassNameTruncated,u=i.containerClassNameExpanded,m=i.containerClassNameTruncationNotRequired,d=(e=this.props,t=this.state,a=e.onRequestToggle,n=e.shouldTruncateIfRequired,o=e.shouldShowTruncateButtonWhenExpanded,r=t.doesRequireTruncation,c=t.shouldForceTruncation,r?c||n?Ne.Truncated({onRequestToggle:a}):Ne.Expanded({onRequestToggle:a,shouldShowTruncateButton:o}):Ne.NotRequired({})),p=Ne.match({Truncated:function(e){var t=e.onRequestToggle;return E.a.some({buttonText:"Read more",onRequestToggle:t})},Expanded:function(e){var t=e.onRequestToggle;return e.shouldShowTruncateButton?E.a.some({buttonText:"Show less",onRequestToggle:t}):E.a.none()},NotRequired:function(){return E.a.none()}})(d);return v.a.createElement("div",{className:G()(_e.a.container,Ne.match({Truncated:function(){return[_e.a.containerTruncated,s]},Expanded:function(){return[u]},NotRequired:function(){return[m]}})(d))},v.a.createElement("p",{ref:this.updateRef,className:G()(_e.a.text,Ne.match({Truncated:function(){return _e.a.textTruncated}},function(){return _e.a.textNotTruncated})(d))},l)," ",p.map(function(e){var t=e.buttonText,a=e.onRequestToggle;return v.a.createElement("button",{className:_e.a.toggleButton,onClick:a},t)}).orUndefined())}}])&&we(t.prototype,n),o&&we(t,o),a}();De.displayName="TruncatedTextToggle";var Pe=De,Ce=a(1434),ke=a.n(Ce),xe=Object(Oe.progressivelyEnhance)(function(e){var t=e.description,a=e.shouldTruncate,n=e.onRequestToggleTruncation;return v.a.createElement(Pe,{key:t,text:t,containerClassNameTruncationNotRequired:ke.a.descriptionTruncationNotRequired,containerClassNameExpanded:ke.a.descriptionExpanded,containerClassNameTruncated:ke.a.descriptionTruncated,shouldTruncateIfRequired:a,shouldShowTruncateButtonWhenExpanded:!1,onRequestToggle:n})}),Le=a(1436),Ue=a.n(Le),Ae=function(e){return v.a.createElement("div",{className:Ue.a.textContainerItem},e)},Be=function(e){var t=e.photo,a=e.location,n=e.shouldTruncateDescription,o=e.onRequestToggleTruncatedDescription,r={pathname:Object(de.b)({photoId:t.id,photoSubRoute:fe.d.info}),state:a.state},c={pathname:Object(de.b)({photoId:t.id,photoSubRoute:fe.d.share}),state:a.state},i=Object(q.d)(t)?E.a.of(t.story.description):E.a.none(),l=Object(q.d)(t)?E.a.of(t.location).map(function(e){return e.title}):E.a.none(),s={url:t.links.html,title:E.a.of(t.description).getOrElse(""),text:Object(he.b)(t.user)};return v.a.createElement("div",{className:Ue.a.container},v.a.createElement("div",{className:Ue.a.textContainer},l.map(function(e){return v.a.createElement(me.a,{to:Object(pe.b)(e),className:Ue.a.locationLink},v.a.createElement(ge.a,{className:Ue.a.locationIcon}),v.a.createElement("span",{className:Ue.a.locationTitle},e))}).map(Ae).orUndefined(),i.map(function(e){return v.a.createElement(xe,{description:e,shouldTruncate:n,onRequestToggleTruncation:o})}).map(Ae).orUndefined()),v.a.createElement("div",{className:Ue.a.cell},v.a.createElement(ye.a,{shareLocationDescriptor:c,shareOptions:s,className:Ue.a.smallButton})),v.a.createElement("div",{className:Ue.a.cell},v.a.createElement(ve.a,{className:Ue.a.button,tag:"link",buttonType:"outline",buttonSize:"small",to:r},v.a.createElement(be.a,{className:Ue.a.buttonIcon}),v.a.createElement("span",{className:Ue.a.buttonText},"Info"))))};Be.displayName="Footer";var Fe,Me,We=Be,ze=a(1214),qe=a(1219),He=a(1218),Ze=a(1161),Ge=a(12),Ve=a(1188),Ke=a(1156),Ye=a(1203),Je=a.n(Ye),Xe=Object(Ge.createSelector)(function(e,t){return t},function(e){return Object(Ve.a)({photo:e,className:Je.a.secondaryLabel}).getOrElse(Ke.a.Username({}))}),Qe=Object(s.connect)(function(e,t){return{secondaryLabel:Xe(e,t.photo)}})(function(e){var t=e.className,a=e.location,n=e.photo,o=e.isLoggedIn,r=e.secondaryLabel,c=o?void 0:"green",i=o?"Download":"Download free";return v.a.createElement("header",{className:G()(t,Je.a.container)},v.a.createElement("div",{className:Je.a.photographer},v.a.createElement(Ze.a,{includeAvatar:!0,userId:n.user.id,secondaryLabel:r,type:"emphasiseUsername"})),v.a.createElement("div",{className:Je.a.actions},v.a.createElement("div",{className:Je.a.buttonCell},v.a.createElement(He.a,{photoId:n.id,location:a})),v.a.createElement("div",{className:Je.a.buttonCell},v.a.createElement(ze.a,{photoId:n.id,location:a})),v.a.createElement("div",{className:Je.a.downloadButtonCell},v.a.createElement(qe.a,{photoId:n.id,showLabel:!0,type:c,label:i,className:Je.a.downloadButton}))))}),$e=a(449),et=a(23),tt=Object(et.a)("M19 3v3h4.8l-4.4 4.5 2 2L26 8.2v5h3V3M6 24v-4.6H3V29h9.6v-3H8l5-5-2-2"),at=Object(et.a)("M3 19v3h4.8l-4.4 4.5 2 2L10 24v5h3V19m9-11V3.4h-3V13h9.6v-3H24l5-5-2-2"),nt=a(1157),ot=a(17),rt=a(119),ct=a(275);(Me=Fe||(Fe={})).portrait="portrait",Me.landscape="landscape",Me.square="square";var it=function(e){var t,a,n,o=(a=(t=e).width,n=t.height,a<n?Fe.portrait:n<a?Fe.landscape:Fe.square);return o===Fe.square||o===Fe.portrait},lt=a(1239),st=a.n(lt);function ut(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var mt=Object(Ie.unionize)({Unenhanced:Object(Ie.ofType)(),Enhanced:Object(Ie.ofType)()}),dt=function(e){var t,a,n,o=e.magicalVerticalOffset,r=function(){var e=Object(rt.g)(10),t=20+o,a=Object(rt.e)({styles:Ye,key:"outerHorizontalGutter",fallback:100});return{TOTAL_HORIZONTAL_PADDING:2*a,TOTAL_VERTICAL_PADDING:t,HORIZONTAL_PADDING_LENGTH:Object(rt.g)(a),VERTICAL_PADDING_LENGTH:e}},b=Object(rt.d)(1),c=r(),g=c.TOTAL_HORIZONTAL_PADDING,v=c.TOTAL_VERTICAL_PADDING,i=(t=r(),a=t.TOTAL_HORIZONTAL_PADDING,n=t.TOTAL_VERTICAL_PADDING,{IMAGE_WIDTH_CONSTRAINED_TO_VIEWPORT_WIDTH_LENGTH:Object(rt.a)("".concat(b," - ").concat(Object(rt.g)(a))),IMAGE_HEIGHT_CONSTRAINED_TO_VIEWPORT_HEIGHT_LENGTH:Object(rt.a)("".concat("100vh"," - ").concat(Object(rt.g)(n)))}),y=i.IMAGE_WIDTH_CONSTRAINED_TO_VIEWPORT_WIDTH_LENGTH,l=i.IMAGE_HEIGHT_CONSTRAINED_TO_VIEWPORT_HEIGHT_LENGTH,O=function(e){var t,a=e.photoDimensions;if(it(a)){var n=a.width/a.height;return t=500,Math.ceil(t*n)}return 500},I=function(e){var t,a=e.photoDimensions,n=a.width/a.height,o=O({photoDimensions:a});return{minWidthLength:Object(rt.g)(o),maxWidthLength:(t=l,Object(rt.a)("(".concat(t,") * ").concat(Object(ct.e)(n))))}},s=function(e){var t,a,n,o,r,c,i,l,s,u=e.photoDimensions;if(e.isZoomedOut){var m=I({photoDimensions:u}),d=m.minWidthLength,p=m.maxWidthLength,f=(a={photoDimensions:u}.photoDimensions,n=a.width,o=a.height,r=o/n,c=O({photoDimensions:a}),t=c,i=Math.ceil(t*r),l=["(max-width: ".concat(Object(rt.g)(c+g),")"),"(max-height: ".concat(Object(rt.g)(i+v),")")],s="".concat(n,"/").concat(o),{isMinSizeMediaConditions:l,isConstrainedByViewportHeightMediaCondition:"(min-aspect-ratio: ".concat(s,")")}),h=f.isConstrainedByViewportHeightMediaCondition;return ut(f.isMinSizeMediaConditions.map(function(e){return{mediaCondition:e,width:d}})).concat([{mediaCondition:h,width:p},{width:y}])}return[{width:b}]},u=m()(function(e){var t=e.photoDimensions,a=e.zoomableOptions;return ut([{mediaCondition:lt.isFixedMediaCondition,width:b}]).concat(ut(s({photoDimensions:t,isZoomedOut:a.isZoomedOut})))},$e.d);return{getPaddingConstants:r,getImgSrcSetString:function(e){var t,a,n,o,r=e.photoDimensions,c=e.baseUrl,i=r.width,l=(a=r,n=a.width,o=n/a.height,{lowerBound:(t=500,Math.ceil(t*o)),upperBound:n}),s=l.lowerBound,u=l.upperBound;return Object($e.c)({baseUrl:c,lowerBound:s,upperBound:u,originalWidth:i,interval:300,getParams:E.a.some(function(){return{q:80}})})},getMinAndMaxWidthsLengths:I,getImgSizesString:u,createFallbackSrc:function(e){return Object(ot.a)({url:e,width:String(1e3),q:"80"})}}};function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ft(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ht(e,t){return!t||"object"!==pt(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gt(e,t){return(gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vt=function(e){function t(e){var g;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(g=ht(this,bt(t).call(this,e))).renderZoomableImageOverlay=function(e){var t=e.isZoomedOut?tt:at;return v.a.createElement("div",{className:st.a.overlay},v.a.createElement("div",{className:st.a.overlayChild},v.a.createElement(t,{className:st.a.zoomToggleIcon})))},g.renderImage=function(){var e=g.props,t=e.photo,a=e.maybeInitialSrc,n=e.onImgLoad,o=e.magicalVerticalOffset,r=e.renderType,c=g.state.shouldUseInitialSrcIfAvailable,i=t.urls.raw,l=dt({magicalVerticalOffset:o}),s=l.getImgSizesString,u=l.getImgSrcSetString,m=l.createFallbackSrc,d={width:t.width,height:t.height},p=s({zoomableOptions:r.zoomable,photoDimensions:d}),f=function(){return u({photoDimensions:d,baseUrl:i})},h=c?a.map(function(e){return Object($e.e)([{url:e}])}).getOrElseL(f):f(),b=m(i);return v.a.createElement(nt.a,{imgDimensions:t,containerClassName:st.a.imagePlaceholder,key:t.id,sizes:p,srcSet:h,onLoad:n,src:b,alt:E.a.of(t.description).orUndefined()})},g.renderZoomableImageButton=function(e){var t=e.isZoomedOut,a=e.onRequestToggleZoom,n=G()(st.a.imageButton,t?st.a.imageButtonZoomedOut:st.a.imageButtonZoomedIn);return v.a.createElement("button",{className:n,onClick:a},g.renderZoomableImageOverlay(e),g.renderImage())},g.renderZoomableImageContainer=function(){var e=g.props,t=e.photo,a=e.magicalVerticalOffset,n=e.renderType,o=dt({magicalVerticalOffset:a}),r=o.getMinAndMaxWidthsLengths,c=o.getPaddingConstants,i=n.zoomable.isZoomedOut,l=c(),s=l.HORIZONTAL_PADDING_LENGTH,u=l.VERTICAL_PADDING_LENGTH,m=r({photoDimensions:{width:t.width,height:t.height}}),d=m.minWidthLength,p=m.maxWidthLength;return v.a.createElement("div",{style:i?{padding:"".concat(u," ").concat(s)}:{}},v.a.createElement("div",{style:i?{minWidth:d,maxWidth:p}:{},className:st.a.imageContainer},mt.match({Unenhanced:g.renderImage,Enhanced:function(e){return g.renderZoomableImageButton(e.zoomable)}})(n)))},g.state=g.getInitialState(),g}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gt(e,t)}(t,l["PureComponent"]),a=t,(n=[{key:"getInitialState",value:function(){return{shouldUseInitialSrcIfAvailable:!0}}},{key:"componentDidMount",value:function(){var e=this;requestAnimationFrame(function(){requestAnimationFrame(function(){e.disableInitialSrc()})})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.photo;e.photo.id!==t.id&&this.setState(this.getInitialState)}},{key:"componentDidUpdate",value:function(){var e=this;this.state.shouldUseInitialSrcIfAvailable&&requestAnimationFrame(function(){requestAnimationFrame(function(){e.state.shouldUseInitialSrcIfAvailable&&e.disableInitialSrc()})})}},{key:"disableInitialSrc",value:function(){this.setState({shouldUseInitialSrcIfAvailable:!1})}},{key:"render",value:function(){return v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:st.a.isFixed},this.renderImage()),v.a.createElement("div",{className:st.a.isZoomable},this.renderZoomableImageContainer()))}}])&&ft(a.prototype,n),o&&ft(a,o),t}(),yt=a(1220),Ot=a(1171),It=a(1197),Et=a(1145),_t=a(1440),St=a.n(_t),wt=Object(It.a)(Et.b),jt=Et.a.Multi({shouldUseContainerPadding:!1}),Rt=function(e){var t=e.photoIdsRemoteData,a=function(e){var t=e.bodyPhotoIdsRemoteData;return v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:St.a.clearfix},v.a.createElement("h4",{className:St.a.heading},"Related photos")),v.a.createElement("div",{className:St.a.contentContainer},function(e){var t=e.bodyPhotoIdsRemoteData;switch(t.type){case H.f.Reloading:case H.f.Success:return v.a.createElement(wt,{photoIds:t.value,mode:jt});case H.f.Loading:return v.a.createElement(se.a,{padContentBelow:!1})}}({bodyPhotoIdsRemoteData:t})))};switch(t.type){case H.f.Reloading:case H.f.Loading:return a({bodyPhotoIdsRemoteData:t});case H.f.Success:return 0===t.value.length?null:a({bodyPhotoIdsRemoteData:t});case H.f.Failure:case H.f.NotAsked:return null}},Tt=a(1442),Nt=a.n(Tt),Dt=a(35),Pt=a(355),Ct=a(61),kt=a(11);function xt(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Lt=xt(Pt.e.map(function(e){return{title:e.title,linkUrl:e.url}})).concat([{title:"Free pictures",linkUrl:Ct.d}]),Ut=function(e){var t=e.originalPhotoTags,a=e.isLoggedIn;return 4<t.length&&!a},At=m()(function(e){return e.split("").map(function(e){return E.a.of(e.codePointAt(0)).get()})},Nt.a),Bt=function(e){var t,a,n,o,r=e.photoId;return a=(t={str:r,array:Lt}).str,n=t.array,o=At(a)%n.length,Object(kt.c)(o,n).get()},Ft=function(e){var t,a,n=e.originalPhotoTags,o=e.photoId,r=e.isLoggedIn,c=Object(Dt.a)([(t={photoId:o},a=t.photoId,m()(Ut,function(e){return e?E.a.some(Bt({photoId:a})):E.a.none()})({originalPhotoTags:n,isLoggedIn:r}))]);return xt(ae()(n,ne.b)).concat(xt(c))},Mt=function(e){var t=e.type===q.a.related?"Related collections":"Featured in ".concat(e.total," collections"),a=e.results.map(function(e){return e.id});return v.a.createElement(yt.a,{relatedCollectionIds:a,heading:t})},Wt=Object(x.c)()(function(e,t){return{isLoggedIn:Object(z.k)(e)}}),zt=Object(s.connect)(Wt)(function(e){var a=e.photo,t=e.relatedPhotoIdsRemoteData,n=e.isLoggedIn,o=E.a.of(Object(q.d)(a)?a.related_collections:void 0),r=Object(q.d)(a)?E.a.some(a.tags):E.a.none();return v.a.createElement(v.a.Fragment,null,v.a.createElement(Rt,{photoIdsRemoteData:t}),o.map(Mt).getOrElse(void 0),r.map(function(e){var t=Ft({originalPhotoTags:e,photoId:a.id,isLoggedIn:n});return v.a.createElement(Ot.a,{headingCopy:"Related tags",tags:t,showHeading:!0,maximumResultsCount:1/0})}).orUndefined())}),qt=a(1444),Ht=a.n(qt),Zt=function(e){var t,o=e.location,a=e.maybeCachedPhoto,n=e.photoFullInfoRemoteData,r=e.maybeMainImageInitialSrc,c=e.relatedPhotoIdsRemoteData,i=e.onMainImageLoad,l=e.shouldTruncateDescription,s=e.onRequestToggleTruncatedDescription,u=e.isLoggedIn,m=e.children,d=e.mainImageRenderType,p=function(e){var t=e.photo,a=Object(C.c)(o),n=a?155:200;return v.a.createElement("div",{className:Ht.a.wrapper},v.a.createElement(K.a,Object.assign({},ie(t))),v.a.createElement("div",null,v.a.createElement("div",{className:G()(a&&Ht.a.stickyHeaderContainer)},v.a.createElement(Qe,{photo:t,location:o,isLoggedIn:u})),v.a.createElement(ue.a,{photoId:t.id},v.a.createElement(vt,{renderType:d,maybeInitialSrc:r,photo:t,onImgLoad:i,magicalVerticalOffset:n})),v.a.createElement(We,{photo:t,location:o,shouldTruncateDescription:l,onRequestToggleTruncatedDescription:s})),v.a.createElement("div",{className:Ht.a.container},v.a.createElement(zt,{photo:t,relatedPhotoIdsRemoteData:c})))},f=a.filter(q.c).map(function(e){return p({photo:e})}).getOrElseL(function(){switch(n.type){case H.f.Reloading:case H.f.Success:return p({photo:n.value});case H.f.Loading:return v.a.createElement("div",{className:Ht.a.spinnerWrapper},v.a.createElement(se.a,{padContentBelow:!1}));case H.f.NotAsked:case H.f.Failure:return null}});return t=f,v.a.createElement("div",{"data-test":le.m},t,m)};Zt.displayName="Photos";var Gt,Vt,Kt=Object(l.memo)(Zt),Yt=a(311),Jt=a(1446),Xt=a.n(Jt),Qt=function(e){return{backgroundImage:["linear-gradient(hsla(0, 0%, 100%, 0.8), white 150px)",Object(ot.u)(e)].join(", ")}},$t=function(e){var t,a,n,o=e.maybeRawPhotoUrl,r=e.maybeMainImageCurrentSrc;return(t={maybeRawPhotoUrl:o,maybeMainImageCurrentSrc:r},a=t.maybeRawPhotoUrl,n=t.maybeMainImageCurrentSrc,a.map(function(e){return Object(ot.a)({url:e,width:String(200),blur:String(20)})}).orElse(n)).map(Qt).orUndefined()},ea=function(e){var t=e.photoId,a=e.maybeRawPhotoUrl,n=e.maybeMainImageCurrentSrc,o=e.modalLocationState,r=e.children;return v.a.createElement(Yt.a,{redirectTo:{pathname:"/photos/".concat(t)},modalLocationState:o,contentStyles:$t({maybeRawPhotoUrl:a,maybeMainImageCurrentSrc:n}),contentClassName:Xt.a.modalContent},r)},ta=a(1167),aa=Object(et.a)("M27.5 18.08a1 1 0 0 0-1.42 0l-9.08 8.59v-23.67a1 1 0 0 0-2 0v23.67l-9.08-8.62a1 1 0 1 0-1.38 1.45l10.77 10.23a1.19 1.19 0 0 0 .15.09.54.54 0 0 0 .16.1.94.94 0 0 0 .76 0 .54.54 0 0 0 .16-.1l.15-.09 10.77-10.23a1 1 0 0 0 .04-1.42z"),na=Object(et.a)("M31.8 15.1l-.2-.4c-3.5-6.9-9.7-11.5-15.6-11.5-6.3 0-12.3 4.5-15.7 11.7l-.2.4c-.2.5-.2 1.1 0 1.6l.2.4c3.6 7 9.7 11.5 15.6 11.5 6.3 0 12.3-4.5 15.6-11.6l.2-.4c.4-.5.4-1.2.1-1.7zm-2 1.2c-3 6.5-8.3 10.5-13.8 10.5-5.2 0-10.6-4.1-13.8-10.4l-.2-.4.1-.3c3.1-6.5 8.4-10.5 13.9-10.5 5.2 0 10.6 4.1 13.8 10.4l.2.4-.2.3zm-13.8-6.6c-3.5 0-6.3 2.8-6.3 6.3s2.8 6.3 6.3 6.3 6.3-2.8 6.3-6.3-2.8-6.3-6.3-6.3zm0 10.6c-2.4 0-4.3-1.9-4.3-4.3s1.9-4.3 4.3-4.3 4.3 1.9 4.3 4.3-1.9 4.3-4.3 4.3z"),oa=Object(et.a)("M28.7 5.5c-1.6-1.5-3.6-2.4-5.7-2.4s-4.2.8-5.7 2.4l-1.3 1.6-1.3-1.6c-1.5-1.5-3.6-2.4-5.7-2.4s-4.1.9-5.7 2.4c-3.1 3.1-3.1 8.2 0 11.4l10.8 11.1c.5.5 1.2.8 1.9.8s1.4-.3 1.9-.8l10.7-11.2c3.2-3.1 3.2-8.2.1-11.3zm-1.5 10l-10.7 11.1c-.1.1-.3.2-.5.2s-.4-.1-.5-.2l-10.7-11.1c-2.3-2.4-2.3-6.2 0-8.5 1.1-1.2 2.6-1.9 4.2-1.9s3.1.6 4.2 1.7l2.8 3.4 2.7-3.4c1.1-1.1 2.6-1.8 4.2-1.8s3.1.6 4.2 1.8c2.5 2.5 2.5 6.3.1 8.7z"),ra=a(20),ca=function(e){return"Æ/".concat(e)},ia=function(e){return"".concat(e,"s")},la=function(e){return"".concat(e,"mm")},sa=a(1448),ua=a.n(sa);(Vt=Gt||(Gt={}))[Vt.views=0]="views",Vt[Vt.downloads=1]="downloads",Vt[Vt.likes=2]="likes";var ma=function(){return v.a.createElement("div",{className:ua.a.container},v.a.createElement("div",{className:ua.a.cell},v.a.createElement(se.a,{padContentBelow:!1})))},da=function(e){var t=e.type,a=e.statRemoteData,n=function(e){switch(e){case Gt.views:return na;case Gt.downloads:return aa;case Gt.likes:return oa}}(t);return v.a.createElement("div",{className:ua.a.stat},v.a.createElement("dt",{className:ua.a.statLabel},v.a.createElement(n,{className:ua.a.statLabelIcon}),v.a.createElement("span",{className:ua.a.statLabelText},function(e){switch(e){case Gt.views:return"Views";case Gt.downloads:return"Downloads";case Gt.likes:return"Likes"}}(t))),function(e){var t=e.statRemoteData;switch(t.type){case H.f.Success:var a=t.value;return v.a.createElement("dd",{className:ua.a.statValue},v.a.createElement("span",{className:ua.a.statValueTotal},Object(ot.h)(a.total)),v.a.createElement("span",{className:ua.a.statValueDelta},Object(ot.j)(a.historical.change)," since last month"));case H.f.Loading:return v.a.createElement("dd",{className:ua.a.statValue},v.a.createElement("div",{className:ua.a.statValueTotalPlaceholder}),v.a.createElement("div",{className:ua.a.statValueDeltaPlaceholder}))}}({statRemoteData:a}))},pa=function(e){return v.a.createElement("dl",{className:ua.a.stats},da({type:Gt.views,statRemoteData:e.views}),da({type:Gt.downloads,statRemoteData:e.downloads}),da({type:Gt.likes,statRemoteData:e.likes}))},fa=function(e){var t=e.maybeCachedPhotoStats,a=e.photoStatsRemoteData;return t.map(function(e){return pa({views:new H.e(e.views),downloads:new H.e(e.downloads),likes:new H.e(e.likes)})}).orElseL(function(){switch(a.type){case H.f.NotAsked:return E.a.none();case H.f.Failure:return E.a.some((a.value,v.a.createElement("div",{className:ua.a.container},v.a.createElement("div",{className:ua.a.cell},v.a.createElement("p",{className:ua.a.p},"Sorry, there was an error loading stats. Please try again later.")))));case H.f.Reloading:case H.f.Success:var e=a.value;return E.a.some(pa({views:new H.e(e.views),downloads:new H.e(e.downloads),likes:new H.e(e.likes)}));case H.f.Loading:return E.a.some(pa({views:new H.b,downloads:new H.b,likes:new H.b}))}})},ha=function(e){var t,a,n=e.photo,o=(a={photo:n}.photo,[{name:"Camera Make",value:(t=a.exif.make,""!==t?t:void 0)},{name:"Camera Model",value:Object(ra.h)(a.exif.model)},{name:"Focal Length",value:Object(ra.f)(la,Object(ra.h)(a.exif.focal_length))},{name:"Aperture",value:Object(ra.f)(ca,Object(ra.h)(a.exif.aperture))},{name:"Shutter Speed",value:Object(ra.f)(ia,Object(ra.h)(a.exif.exposure_time))},{name:"ISO",value:Object(ra.h)(a.exif.iso)},{name:"Dimensions",value:"".concat(a.width," Ã ").concat(a.height)}].map(function(e){var t=e.name,a=e.value;return{name:t,value:Object(ra.c)(function(){return"--"},a)}}));return v.a.createElement("dl",{className:ua.a.metadata},o.map(function(e){var t=e.name,a=e.value;return v.a.createElement("div",{key:t,className:ua.a.metadataItem},v.a.createElement("dt",{className:ua.a.metadataItemName},t),v.a.createElement("dd",{className:ua.a.metadataItemValue},a))}))},ba=function(e){var t=e.cachedPhoto,a=e.photoFullInfoRemoteData;return Object(q.d)(t)?E.a.some(ha({photo:t})):function(){switch(a.type){case H.f.Reloading:case H.f.Success:return E.a.some(ha({photo:a.value}));case H.f.Loading:return E.a.some(ma());case H.f.NotAsked:return E.a.none();case H.f.Failure:return E.a.some((a.value,v.a.createElement("div",{className:ua.a.container},v.a.createElement("div",{className:ua.a.cell},v.a.createElement("p",{className:ua.a.p},"Sorry, there was an error loading metadata. Please try again later.")))))}}()},ga=function(e){var t=e.auth,a=e.photo,n=(E.a.of(t.user).exists(function(e){return e.username===a.user.username})?E.a.some("/account/photos"):t.isAdmin?E.a.some("/super/photos/".concat(a.id,"/edit")):E.a.none()).map(function(e){return v.a.createElement("a",{href:e},"Edit photo")});return Object(ta.c)({render:function(e){return v.a.createElement("div",{className:ua.a.containerFooter},e)},renderItem:function(e){return v.a.createElement("div",{className:ua.a.cell},e)}})([{key:"edit-photo",maybeEl:n}])},va=function(e){var t=e.cachedPhoto,a=e.photoFullInfoRemoteData,n=e.photoStatsRemoteData,o=e.auth,r=Object(ot.g)(new Date(t.created_at)),c=Object(q.e)(t)?E.a.some(t.stats):E.a.none(),i=Object(q.d)(t)?E.a.some(E.a.of(t.story.title).getOrElseL(function(){return"Info"})):E.a.none(),l=Object(ta.b)({render:function(e){return e}})([{key:"stats",maybeEl:fa({maybeCachedPhotoStats:c,photoStatsRemoteData:n})},{key:"metadata",maybeEl:ba({cachedPhoto:t,photoFullInfoRemoteData:a})},{key:"other-links",maybeEl:ga({photo:t,auth:o})}]);return v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:ua.a.containerTitle},v.a.createElement("div",{className:ua.a.cell},i.map(function(e){return v.a.createElement("h2",{className:ua.a.title},e)}).orNull(),v.a.createElement("span",{className:ua.a.datePublished},"Published on ",v.a.createElement("time",{dateTime:t.created_at},r)))),Object(ta.a)(l,function(e){return v.a.createElement("hr",{key:"separator-".concat(e),className:ua.a.hr})}))},ya=Object(s.connect)(function(e,t){return{auth:Object(z.c)(e)}})(function(e){var t=e.maybeCachedPhoto,a=e.photoFullInfoRemoteData,n=e.photoStatsRemoteData,o=e.auth;return t.filter(q.c).map(function(e){return va({cachedPhoto:e,photoStatsRemoteData:n,auth:o,photoFullInfoRemoteData:a})}).getOrElseL(function(){switch(a.type){case H.f.Reloading:case H.f.Success:return va({cachedPhoto:a.value,photoStatsRemoteData:n,auth:o,photoFullInfoRemoteData:a});case H.f.Loading:return ma();case H.f.NotAsked:case H.f.Failure:return null}})}),Oa=function(e){var t=e.maybeCachedPhoto,a=e.photoId,n=e.maybeMainImageCurrentSrc,o=e.photoFullInfoRemoteData,r=e.photoStatsRemoteData,c=e.modalLocationState,i=t.filter(q.c).map(function(e){return e.urls.raw});return v.a.createElement(ea,{photoId:a,modalLocationState:c,maybeMainImageCurrentSrc:n,maybeRawPhotoUrl:i},v.a.createElement(ya,{maybeCachedPhoto:t,photoFullInfoRemoteData:o,photoStatsRemoteData:r}))},Ia=a(53),Ea=a(86),_a=a(18),Sa=a(215),wa=a(1217),ja=a(1450),Ra=a.n(ja),Ta=function(e){var t=e.photo,a=t.links.html,n=function(e){return Object(_a.h)(a,{utmSource:e,utmContent:Ia.h.PHOTOS_PAGE_SHARE})},o=Object(he.b)(t.user),r=Object(Ea.d)(t.urls.raw)({w:2e3}),c=[{url:n("facebook"),type:Sa.a.facebook({})},{url:n("pinterest"),type:Sa.a.pinterest({message:o,media:r})},{url:n("twitter"),type:Sa.a.twitter({message:o})},{url:n("email"),type:Sa.a.email({})}];return v.a.createElement(wa.a,{title:"Photo by ".concat(t.user.name),buttonsShareProps:c,link:a})},Na=function(e){var t=e.maybeCachedPhoto,a=e.photoFullInfoRemoteData;return t.filter(q.c).map(function(e){return Ta({photo:e})}).getOrElseL(function(){switch(a.type){case H.f.Reloading:case H.f.Success:return Ta({photo:a.value});case H.f.Loading:return v.a.createElement("div",{className:Ra.a.container},v.a.createElement("div",{className:Ra.a.cell},v.a.createElement(se.a,{padContentBelow:!1})));case H.f.NotAsked:case H.f.Failure:return null}})},Da=function(e){var t=e.maybeCachedPhoto,a=e.photoId,n=e.maybeMainImageCurrentSrc,o=e.photoFullInfoRemoteData,r=e.modalLocationState;return v.a.createElement(ea,{photoId:a,modalLocationState:r,maybeMainImageCurrentSrc:n,maybeRawPhotoUrl:t.filter(q.c).map(function(e){return e.urls.raw})},v.a.createElement(Na,{maybeCachedPhoto:t,photoFullInfoRemoteData:o}))},Pa=Object(k.e)("photo"),Ca=function(e){return m()(e.photos.getPhotoWithInfo,Object(w.a)(function(e){return new H.e(e)}))},ka=function(e){var t=e.value,a=Pa(t).entities;return[Object(D.ib)(a),D.a.UpdatePhotoFullInfoRemoteData({photoId:t.id,photoFullInfoRemoteData:e})]};function xa(e){return(xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function La(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ua(e){return(Ua=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Aa(e,t){return(Aa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ba(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Fa=Object(k.e)("relatedPhotos"),Ma=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,n=Ua(o).call(this,e),(t=!n||"object"!==xa(n)&&"function"!=typeof n?Ba(a):n).resetNumberOfRequests=function(){t.resetNumberOfRequestsSubject.next({})},t.onRequestToggleTruncatedDescription=function(){var e=t.props.location;t.context.router.history.replace(Object(C.o)(function(e){return{shouldTruncateDescription:!e.shouldTruncateDescription}})(e))},t.state=t.getInitialState(),t.onRequestMainImageToggleZoom=t.onRequestMainImageToggleZoom.bind(Ba(Ba(t))),t.onMainImageLoad=t.onMainImageLoad.bind(Ba(Ba(t))),t.onRootRouteLeaveSubject=new u.a,t.onInfoRouteLeaveSubject=new u.a,t.requestSubject=new u.a,t.resetNumberOfRequestsSubject=new u.a,t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Aa(e,t)}(o,l["PureComponent"]),t=o,(a=[{key:"getDefaultState",value:function(){return{mainImageCurrentSrc:E.a.none()}}},{key:"getInitialState",value:function(){return this.getDefaultState()}},{key:"getResetState",value:function(){return this.getDefaultState()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.renderType;this.setupProgressBar(),B.a.is.Unenhanced(a)||this.fetchThenCacheAndSet(),this.fetchRelatedPhotosThenCacheAndSet(),t.params.subRoute===L.b.info&&this.fetchPhotoStatsThenCacheAndSet()}},{key:"componentWillReceiveProps",value:function(e){var a=this,t=this.props,n=t.match,o=t.maybePhoto,r=t.photoFullInfoRemoteData,c=t.photoStatsRemoteData,i=e.maybePhoto;n.params.id!==e.match.params.id?this.reset():i.forEach(function(t){o.map(function(e){return e!==t}).getOrElse(!0)&&(r.type===H.f.Success&&Object(q.d)(t)&&a.updatePhotoFullInfoRemoteData(new H.e(t)),c.type===H.f.Success&&Object(q.e)(t)&&a.updatePhotoStatsRemoteData(new H.e(t.stats)))})}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params,a=t.id,n=t.subRoute,o=e.match.params,r=o.id,c=o.subRoute;a!==r&&(this.cleanup(),this.fetchThenCacheAndSet(),this.fetchRelatedPhotosThenCacheAndSet());var i=c===L.b.info,l=n===L.b.info;!i&&l?this.fetchPhotoStatsThenCacheAndSet():i&&!l&&this.onInfoRouteLeaveSubject.next({})}},{key:"componentWillUnmount",value:function(){this.cleanup()}},{key:"setupProgressBar",value:function(){var e=this.requestSubject.asObservable(),t=this.props,a=t.hideProgressBar,n=t.showProgressBar;this.resetNumberOfRequestsSubject.asObservable().pipe(Object(p.a)({}),Object(f.a)(function(){return e.pipe(Object(h.a)(function(e){var t,a=Object(d.a)({}),n=e.pipe(function(e){return e.lift(new y(t,e))});return a.pipe(Object(I.a)(1),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(_.a.apply(void 0,[e].concat(t)))}}(n.pipe(Object(I.a)(-1))))}),Object(S.a)(r.a,0),Object(p.a)(0))})).pipe(Object(w.a)(function(e){return 0<e}),Object(j.a)()).subscribe(function(e){e?n():a()})}},{key:"cleanup",value:function(){this.onRootRouteLeaveSubject.next({}),this.onInfoRouteLeaveSubject.next({})}},{key:"updatePhotoFullInfoRemoteData",value:function(e){var t=this.props,a=t.updatePhotoFullInfoRemoteData;a({photoId:t.match.params.id,photoFullInfoRemoteData:e})}},{key:"updateRelatedPhotoIdsRemoteData",value:function(e){var t=this.props,a=t.updateRelatedPhotoIdsRemoteData;a({photoId:t.match.params.id,relatedPhotoIdsRemoteData:e})}},{key:"updatePhotoStatsRemoteData",value:function(e){var t=this.props,a=t.updatePhotoStatsRemoteData;a({photoId:t.match.params.id,photoStatsRemoteData:e})}},{key:"reset",value:function(){this.setState(this.getResetState()),this.resetNumberOfRequests()}},{key:"fetchThenCacheAndSet",value:function(){var e=this.props,t=e.match,a=e.maybePhoto,n=e.setErrorFlash,o=e.dispatch,r=t.params.id,c=this.context.router.history.replace;this.updatePhotoFullInfoRemoteData(new H.b);var i=Ca(P.a)({photoId:r}).pipe(Object(R.a)(function(e){return Object(d.a)(new H.a(e))}),Object(T.a)(this.onRootRouteLeaveSubject),Object(N.a)());i.subscribe(function(e){if(o(D.a.RouteDataUpdated({})),e.type===H.f.Failure)Object(F.d)(e.value)?n({message:"There was a network error. Please check your internet connection."}):(n({message:"There was a server error. Please try again later."}),a.isEmpty()&&Object(L.n)(c)(e.value));else{var t=ka(e);o(D.a.BatchActions({actions:t}))}}),this.requestSubject.next(i)}},{key:"fetchRelatedPhotosThenCacheAndSet",value:function(){var n=this,e=this.props,t=e.match,o=e.updateData,a=e.relatedPhotoIdsRemoteData,r=t.params.id,c=function(){switch(a.type){case H.f.Reloading:case H.f.Success:return new H.d(a.value);case H.f.Failure:case H.f.Loading:case H.f.NotAsked:return new H.b}}();this.updateRelatedPhotoIdsRemoteData(c);var i=P.a.photos.getRelatedPhotos({photoId:r}).pipe(Object(w.a)(function(e){return{normalizedResponse:Fa(e),remoteData:new H.e(e.results.map(function(e){return e.id}))}}),Object(R.a)(function(e){return Object(d.a)({normalizedResponse:void 0,remoteData:new H.a(e)})}),Object(T.a)(this.onRootRouteLeaveSubject),Object(N.a)());i.subscribe(function(e){var t=e.normalizedResponse,a=e.remoteData;void 0!==t&&o(t.entities),n.updateRelatedPhotoIdsRemoteData(a)}),this.requestSubject.next(i)}},{key:"fetchPhotoStatsThenCacheAndSet",value:function(){var n=this,e=this.props,t=e.match,o=e.updatePhotoStats,r=t.params.id;this.updatePhotoStatsRemoteData(new H.b);var a=P.a.photos.getPhotoStats({photoId:r}).pipe(Object(w.a)(function(e){return{response:e,remoteData:new H.e(e)}}),Object(R.a)(function(e){return Object(d.a)({response:void 0,remoteData:new H.a(e)})}),Object(T.a)(this.onInfoRouteLeaveSubject),Object(N.a)());a.subscribe(function(e){var t=e.response,a=e.remoteData;void 0!==t&&o(r,t),n.updatePhotoStatsRemoteData(a)}),this.requestSubject.next(a)}},{key:"onRequestMainImageToggleZoom",value:function(){this.trackToggleZoomableMainImageZoom(),this.toggleZoomableMainImageZoom()}},{key:"trackToggleZoomableMainImageZoom",value:function(){var e=this.props,t=e.location,a=e.trackZoomedInPhoto,n=e.trackZoomedOutPhoto,o=e.match.params.id;Object(C.l)({location:t}).zoomableMainImageOptions.isZoomedOut?a(o):n(o)}},{key:"toggleZoomableMainImageZoom",value:function(){var e=this.props,t=e.location,a=e.pageModalScrollResetRequested,n=this.context.router.history;Object(C.c)(t)&&a(),n.replace(Object(C.o)(function(e){var t=e.zoomableMainImageOptions;return{zoomableMainImageOptions:Object.assign({},t,{isZoomedOut:!t.isZoomedOut})}})(t))}},{key:"onMainImageLoad",value:function(e){var t;this.setState({mainImageCurrentSrc:(t=e.currentTarget,E.a.of(t.currentSrc).filter(U.b).orElseL(function(){return E.a.of(t.src).filter(U.b)}))})}},{key:"renderSubRoute",value:function(){var e=this.props,t=e.match,a=e.location,n=e.maybePhoto,o=e.photoFullInfoRemoteData,r=e.photoStatsRemoteData,c=e.renderType,i=t.params.id,l=Object(C.i)(a),s=Object(C.l)({location:a}),u=E.a.of(s.initialSrc),m=t.params.subRoute,d=!Object(C.e)(a)&&B.a.is.Enhanced(c);switch(m){case L.b.info:return l.filter(function(){return d}).map(function(e){return v.a.createElement(Oa,{maybeCachedPhoto:n,photoId:i,modalLocationState:e,maybeMainImageCurrentSrc:u,photoFullInfoRemoteData:o,photoStatsRemoteData:r})}).orUndefined();case L.b.share:return l.filter(function(){return d}).map(function(e){return v.a.createElement(Da,{maybeCachedPhoto:n,photoId:i,modalLocationState:e,maybeMainImageCurrentSrc:u,photoFullInfoRemoteData:o})}).orUndefined();case void 0:return}}},{key:"render",value:function(){var e=this,t=this.props,a=t.maybePhoto,n=t.location,o=t.isLoggedIn,r=t.photoFullInfoRemoteData,c=t.relatedPhotoIdsRemoteData,i=t.renderType,l=Object(C.l)({location:n}),s=l.shouldTruncateDescription,u=B.a.match({Unenhanced:function(){return mt.Unenhanced({zoomable:{isZoomedOut:l.zoomableMainImageOptions.isZoomedOut}})},Enhanced:function(){return mt.Enhanced({zoomable:{isZoomedOut:l.zoomableMainImageOptions.isZoomedOut,onRequestToggleZoom:e.onRequestMainImageToggleZoom}})}})(i),m=E.a.of(l.initialSrc);return v.a.createElement(Kt,{maybeCachedPhoto:a,location:n,photoFullInfoRemoteData:r,maybeMainImageInitialSrc:m,relatedPhotoIdsRemoteData:c,onMainImageLoad:this.onMainImageLoad,mainImageRenderType:u,shouldTruncateDescription:s,onRequestToggleTruncatedDescription:this.onRequestToggleTruncatedDescription,isLoggedIn:o},this.renderSubRoute())}}])&&La(t.prototype,a),n&&La(t,n),o}();Ma.contextTypes={router:i.a.object.isRequired};var Wa=Object(x.a)({updateData:D.ib,updatePhotoStats:D.jb,setErrorFlash:D.B,trackZoomedInPhoto:D.cb,trackZoomedOutPhoto:D.db,showProgressBar:D.I,hideProgressBar:D.o,pageModalScrollResetRequested:D.s,updatePhotoFullInfoRemoteData:D.a.UpdatePhotoFullInfoRemoteData,updateRelatedPhotoIdsRemoteData:D.a.UpdateRelatedPhotoIdsRemoteData,updatePhotoStatsRemoteData:D.a.UpdatePhotoStatsRemoteData}),za=m()(Object(A.b)({routeType:A.a.DynamicRoute}),Object(s.connect)(function(){var n=Object(M.f)(),o=Object(W.b)(),r=Object(W.d)(),c=Object(W.c)();return function(e,t){var a=t.match.params.id;return{maybePhoto:E.a.of(n(e,a)),isLoggedIn:Object(z.k)(e),photoFullInfoRemoteData:o(e,{photoId:a}),relatedPhotoIdsRemoteData:r(e,{photoId:a}),photoStatsRemoteData:c(e,{photoId:a})}}},Wa),B.b)(Ma);a.d(t,"default",function(){return za}),a.d(t,"PhotoFullInfoRemoteData",function(){}),a.d(t,"RelatedPhotoIdsRemoteData",function(){}),a.d(t,"PhotoStatsRemoteData",function(){})}}]);
//# sourceMappingURL=photos-route.84c85.js.map